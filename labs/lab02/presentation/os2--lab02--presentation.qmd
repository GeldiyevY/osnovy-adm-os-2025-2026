---
# Preamble

## Author
author:
  name: Гелдиев Ыхлас
  degrees: DSc
  orcid: 0000-0002-0877-7063
  email: 1032249184@pfur.ru
  affiliation:
    - name: Российский университет дружбы народов
      country: Российская Федерация
      postal-code: 117198
      city: Москва
      address: ул. Миклухо-Маклая, д. 6
## Title
title: Лабораторная работа №2
subtitle: Гелдиев Ыхлас
license: CC BY
date: 1970-01-01
## Generic options
lang: ru-RU
crossref:
  lof-title: Список иллюстраций
  lot-title: Список таблиц
  lol-title: Листинги
## Formats
format:
### Pdf output format
  beamer:
    include-in-header: 
      text: |
        \usepackage{fontspec}
        \setmainfont{Noto Serif}
        \setsansfont{Noto Sans}
    toc: true
    toc-title: Содержание
    number-sections: true
    colorlinks: false
    toc-depth: 2
    slide_level: 2
    aspectratio: 169
    section-titles: true
    theme: metropolis
    themeoptions: progressbar=frametitle,sectionpage=progressbar,numbering=fraction
#### Language
    babel-lang: russian
    babel-otherlangs: english
### Html output
  revealjs:
    transition: slide
    margin: 0.2
    smaller: false
    output-ext: html
    theme: beige
    logo: _resources/image/logo_rudn.png
---

# Информация

## Докладчик

  * Гелдиев Ыхлас
  * студент
  * студент Направления Прикладная Информатика 
  * Российский университет дружбы народов им. П. Лумумбы
  * [1032249184@pfur.ru](mailto:1032249184@pfur.ru)
  * <https://geldiyevy.github.io/ru/>

## Цель работы

Получить представление о работе с учётными записями пользователей и группами пользователей в операционной системе типа Linux.

# Задание

## Прочитайте справочное описание man по командам ls, whoami, id, groups, su, sudo, passwd, vi, visudo, useradd, usermod, userdel, groupadd, groupdel.

![Все `man`](image/all_man.png)

1. Выполните действия по переключению между учётными записями пользователей, по управлению учётными записями пользователей (раздел 2.4.1).

2. Выполните действия по созданию пользователей и управлению их учётными записями (раздел 2.4.2).

3. Выполните действия по работе с группами пользователей (раздел 2.4.3).

# Выполнение лабораторной работы

## Переключение учётных записей пользователей

1. Войдите в систему как обычный пользователь и откройте терминал.

2. Определите, какую учётную запись пользователя вы используете, введя команду `whoami`. Выведите на экран более подробную информацию, используя команду `id`

![`whoami`](image/whoami_id.png)

## В отчёте дайте пояснение по отображённой информации.

- uid — это идентификатор пользователя (число, назначенное пользователю).
- gid — это идентификатор группы (число, назначенное группе).
- groups — это список групп пользователя (числа и/или имена групп).
- context — это окружение выполнения процесса (переменные, права, текущая сессия и связанные идентификаторы).

## Используйте команду su для переключения к учётной записи root. При запросе пароля введите пароль пользователя root. Наберите `id`. В отчёте дайте пояснение по отображённой информации.

![`su id`](image/su_id.png)

## Вернитесь к учётной записи своего пользователя: `su имя_пользователя` или воспользуйтесь комбинацией клавиш `Ctrl + d` или командой `exit`

![`su имя_пользователя`](image/su_igeldiev.png)

## Просмотрите в безопасном режиме файл /etc/sudoers, используя, например, `sudo -i visudo`.

![`sudo -i visudo`](image/sudo_i_visudo.png)

## В отчёте поясните, почему для работы с файлом /etc/sudoers требуется использовать visudo, а не произвольный редактор.

- visudo проверяет синтаксис и блокирует `/etc/sudoers`, предотвращая ошибки, которые обычный редактор мог бы записать и вывести `sudo` из‑строя.

## Убедитесь, что в открытом с помощью visudo файле присутствует строка
`%wheel ALL=(ALL) ALL`

![`%wheel ALL=(ALL) ALL`](image/wheel_all.png)

## В отчёте поясните, что это означает и для чего нужна группа wheel.

- `%wheel ALL=(ALL) ALL` — разрешает всем пользователям, входящим в группу wheel, выполнять любые команды от имени любого пользователя (в том числе root) через sudo.

## Создайте пользователя alice, входящего в группу wheel: `sudo -i useradd -G wheel alice` ([рис. @fig-001])

8. Убедитесь, что пользователь alice добавлен в группу wheel, введя `id alice` ([рис. @fig-001])

9. Задайте пароль для пользователя alice, набрав `sudo -i passwd alice`. Пароль требуется ввести дважды. ([рис. @fig-001])

##

![Создаем alice](image/alice.png){#fig-001}

## Переключитесь на учётную запись пользователя alice: `su alice`

![`su alice`](image/su_alice.png)

## Создайте пользователя bob: `sudo useradd bob`. Введите пароль при запросе. Проверьте, что пользователь bob создан. ([рис. @fig-002])

12. Установите пароль для пользователя bob: `sudo passwd bob` ([рис. @fig-002])

13. Просмотрите, в какие группы входит пользователь bob: `id bob` ([рис. @fig-002])

##

![Создаем bob](image/bob.png){#fig-002}

## Создание учётных записей пользователей

### Применим общие решения для создания учётных записей пользователей.

## Переключитесь в терминале на учётную запись пользователя root: `su`

![`su`](image/su.png) 

## Откройте файл конфигурации /etc/login.defs для редактирования, используя, например, vim (не забудьте, что требуются полномочия пользователя root): `vim /etc/login.defs`. Измените несколько параметров. Например, найдите параметр `CREATE_HOME` и убедитесь, что он установлен в значение `yes`. Также установите параметр `USERGROUPS_ENAB no`. Это позволит не добавлять нового пользователя в группу с тем же именем, что и пользователь, а использовать группу `users`.

![`CREATE_HOME`](image/create_home_yes.png){#fig-007}

##

![`USERGROUP_ENAB`](image/usergroup_enab_yes.png){#fig-008}

## Перейдите в каталог `/etc/skel`: `cd /etc/skel`. Создайте каталоги Pictures и Documents: `mkdir Pictures` и `mkdir Documents`. Это позволит добавить эти каталоги по умолчанию во все домашние каталоги пользователей.

![Pictures and Documents](image/pictures_documents.png)

## Измените содержимое файла .bashrc, добавив строку `export EDITOR=/usr/bin/vim` или `export EDITOR=/usr/bin/mceditor`. Эта запись означает, что текстовый редактор vim или редактор mceditor будет установлен по умолчанию для инструментов, которые нуждаются в изменении текстовых файлов.

![`export EDITOR`](image/export_editor.png)

## Переключитесь в терминале на учётную запись пользователя `alice`: `su alice` ([рис. @fig-003])

6. Используя утилиту useradd, создайте пользователя carol: `sudo -i useradd carol` ([рис. @fig-003])

##

![Создаем `carol`](image/useradd_carol.png){#fig-003}

## Установите пароль для пользователя carol: `sudo passwd carol`

![`sudo passwd carol`](image/passwd_carol.png)

## Посмотрите и прокомментируйте информацию о пользователе carol, проверьте, в какую первоначальную группу входит пользователь `carol`; Также убедитесь, что каталоги Pictures и Documents были созданы в домашнем каталоге пользователя carol ([рис. @fig-004]):

- `su carol`
- `id`
- `cd`
- `ls -Al`


## Переключитесь в терминале на учётную запись пользователя alice: `su alice` ([рис. @fig-004])

10. Поясните в отчёте строку записи о пароле пользователя carol в файле /etc/shadow: `sudo cat /etc/shadow | grep carol` ([рис. @fig-004])

11. Измените свойства пароля пользователя carol следующим образом: `sudo passwd -n 30 -w 3 -x 90 carol`. В этой записи срок действия пароля истекает через 90 дней (-x 90). За три дня до истечения срока действия пользователь получит предупреждение (-w 3). Пароль должен использоваться как минимум за 30 дней (-n 30) до того, как его можно будет изменить. ([рис. @fig-004])

##

![Настраиваем `carol`](image/setting_up_carol.png){#fig-004}

## Убедитесь в изменении в строке с данными о пароле пользователя carol в файле /etc/shadow: `sudo cat /etc/shadow | grep carol` ([рис. @fig-005])

13. Убедитесь, что идентификатор alice существует во всех трёх файлах: `grep alice /etc/passwd /etc/shadow /etc/group` ([рис. @fig-005])

14. Убедитесь, что идентификатор carol существует не во всех трёх файлах: `sudo grep carol /etc/passwd /etc/shadow /etc/group`([рис. @fig-005])

##

![Убеждаемся и проверяем](image/grep_passwd.png){#fig-005}

## Работа с группами

### В этом упражнении требуется создать две группы и добавить некоторых пользователей в эти группы.

## Находясь под учётной записью пользователя alice, создайте группы main и third:
`sudo groupadd main`
`sudo groupadd third`

![Создаем группы](image/adding_groups.png)

## Используйте usermod для добавления пользователей alice и bob в группу main,
а carol, dan, dave и david — в группу third ([рис. @fig-006]):
`sudo usermod -aG main alice`
`sudo usermod -aG main bob`
`sudo usermod -aG third carol`

## Убедитесь, что пользователь carol правильно добавлен в группу third: `id carol`. Пользователю carol должна быть назначена основная группа с идентификатором `gid = 100 (users)`. Определите, в какие вторичные группы входит carol. ([рис. @fig-006])

![Добавляем в группы и проверяем](image/adding_to_groups.png){#fig-006}

## Определите, участниками каких групп являются другие созданные вами пользователи. Укажите эту информацию в отчёте.

![`getent group`](image/getent.png)

## Выводы

Я получил представление о работе с учётными записями пользователей и группами пользователей в операционных системах типа Linux.

---
# Preamble

# Author
author:
  name: Гелдиев Ыхлас
  degrees: DSc
  orcid: 0000-0002-0877-7063
  email: 1032249184@pfur.ru
  affiliation:
    - name: Российский университет дружбы народов
      country: Российская Федерация
      postal-code: 117198
      city: Москва
      address: ул. Миклухо-Маклая, д. 6
# Title
title: "Лабораторная работа №4"
subtitle: "Работа с программными пакетами"
license: CC BY
date: 2024-09-27
# Generic options
lang: ru-RU
crossref:
  lof-title: Список иллюстраций
  lot-title: Список таблиц
  lol-title: Листинги
# Formats
format:
  ## Pdf output format
  beamer:
    include-in-header:
      text: |
        \usepackage{fontspec}
        \setmainfont{Noto Serif}
        \setsansfont{Noto Sans}
    toc: true
    toc-title: Содержание
    number-sections: true
    colorlinks: false
    toc-depth: 2
    slide_level: 2
    aspectratio: 169
    section-titles: true
    theme: metropolis
    themeoptions: progressbar=frametitle,sectionpage=progressbar,numbering=fraction
    ## Language
    babel-lang: russian
    babel-otherlangs: english
  ## Html output
  revealjs:
    transition: slide
    margin: 0.2
    smaller: false
    output-ext: html
    theme: beige
    logo: _resources/image/logo_rudn.png
---

# Информация

# Докладчик

- Гелдиев Ыхлас
- студент
- Российский университет дружбы народов им. П. Лумумбы
- [1032249184@pfur.ru](mailto:1032249184@pfur.ru)
- <https://geldiyevy.github.io/ru/>

# Цель работы

Получить навыки работы с репозиториями и менеджерами пакетов

# Задание

1. Изучите, как и в каких файлах подключаются репозитории для установки программного обеспечения; изучите основные возможности (поиск, установка, обновление, удаление пакета, работа с историей действий) команды dnf (см. раздел 4.4.1).
2. Изучите и повторите процесс установки/удаления определённого пакета с использованием возможностей dnf (см. раздел 4.4.1).
3. Изучите и повторите процесс установки/удаления определённого пакета с использованием возможностей rpm (см. раздел 4.4.2).

# Выполнение лабораторной работы

# Работа с репозиториями

1. В консоли перейдите в режим работы суперпользователя (используйте команду `su -`) ([рис. @fig-001])

2. Перейдите в каталог /etc/yum.repos.d и изучите содержание каталога и файлов репозиториев: ([рис. @fig-001])
   `cd /etc/yum.repos.d`
   `ls`
   `cat название_репозитория.repo`

#

![Переход](image/root_start.png){#fig-001}

# Выведите на экран список репозиториев: ([рис. @fig-002])

`dnf repolist`
и поясните полученную информацию.

# Выведите на экран список пакетов, в названии или описании которых есть слово user: ([рис. @fig-002])

`dnf search user`
и поясните полученную информацию.

#

![Операции с dnf](image/dnf_repolist_search.png){#fig-002}

# Установите nmap, предварительно изучив информацию по имеющимся пакетам:

`dnf search nmap`
`dnf info nmap`
`dnf install nmap`
`dnf install nmap\*`

#

![Установка nmap 1](image/installing_nmap_1.png)

#

![Установка nmap 2](image/installing_nmap_2.png)

# Поясните разницу между dnf install nmap и dnf install nmap\*.

- `dnf install nmap` устанавливает только пакет **nmap**, а `dnf install nmap\*` подбирает и ставит **все** доступные пакеты, имена которых начинаются с **nmap**.

# Удалите nmap:

`dnf remove nmap`
`dnf remove nmap\*`

![Удаляем nmap](image/removing_nmap.png)

# Получите список имеющихся групп пакетов, затем установите группу пакетов RPM Development Tools:

`dnf groups list`
`LANG=C dnf groups list`
`dnf groups info "RPM Development Tools"`
`dnf groupinstall "RPM Development Tools"`

# Для удаления группы пакетов RPM Development Tools можно воспользоваться командой

`dnf groupremove "RPM Development Tools"`

#

![dnf группы 1](image/dnf_groups_1.png)

#

![dnf группы 2](image/dnf_groups_2.png)

#

![`dnf groupremove`](image/dnf_groupremove.png)

# Посмотрите историю использования команды dnf:

`dnf history`
и отмените последнее, например шестое по счёту, действие:
`dnf history undo 6`

#

![`dnf history`](image/dnf_history.png)

#

![`dnf history undo 6`](image/dnf_history_undo.png)

# Использование rpm

Предположим, что требуется установить текстовый браузер lynx из rpm-пакета.

1. Скачайте rpm-пакет lynx: ([рис. @fig-003])
   `dnf list lynx`
   `dnf install lynx --downloadonly`
2. Найдите каталог, в который был помещён пакет после загрузки: ([рис. @fig-003])
   `find /var/cache/dnf/ -name lynx\*`
3. Перейдите в этот каталог и затем установите rpm-пакет: ([рис. @fig-003])
   `rpm -Uhv lynx-<версия>.rpm`

# Определите расположение исполняемого файла: ([рис. @fig-003])

`which lynx`

![Устанавливаем lynx](image/lynx_install.png){#fig-003}

# Используя rpm, определите по имени файла, к какому пакету принадлежит lynx:

`rpm -qf $(which lynx)`
и получите дополнительную информацию о содержимом пакета, введя:
`rpm -qi lynx`

#

![`rpm -qf -qi`](image/rpm-qf.png)

# Получите список всех файлов в пакете, используя:

`rpm -ql lynx`

![rpm -ql](image/rpm-ql.png)

# А также выведите перечень файлов с документацией пакета, введя:

`rpm -qd lynx`

![rpm -qd](image/rpm-qd.png)

# Посмотрите файлы документации, применив команду `man lynx`.

![man lynx](image/man_lynx.png)

# Выведите на экран перечень и месторасположение конфигурационных файлов пакета: ([рис. @fig-004])

`rpm -qc lynx`

# Выведите на экран расположение и содержание скриптов, выполняемых при установке пакета: ([рис. @fig-004])

`rpm -q --scripts lynx`

![rpm -qc --scripts](image/rpm-qc--scripts.png){#fig-004}

# В отдельном терминале под своей учётной записью запустите текстовый браузер lynx, чтобы проверить корректность установки пакета.

![lynx](image/lynx.png)

# Вернитесь в терминал с учётной записью root и удалите пакет:

`rpm -e lynx`
`ls`

![rpm -e lynx](image/remove_lynx.png)

Предположим, что требуется из rpm-пакетов установить dnsmasq (DNS-, DHCP- и TFTPсервер).

# Установите пакет dnsmasq: ([рис. @fig-005])

`dnf list dnsmasq`
`dnf install dnsmasq`
и определите расположение исполняемого файла: ([рис. @fig-005])
`which dnsmasq` 2. Определите по имени файла, к какому пакету принадлежит dnsmasq: ([рис. @fig-005])
`rpm -qf $(which dnsmasq)`
и получите дополнительную информацию о содержимом пакета: ([рис. @fig-005])
`rpm -qi dnsmasq`

#

![dnsmasq 1](image/dnsmasq.png){#fig-005}

# Получите список всех файлов в пакете:

`rpm -ql dnsmasq`

![rpm -ql dnsmasq](image/dnsmasq_2.png)

# А также выведите перечень файлов с документацией пакета:

`rpm -qd dnsmasq`

![rpm -qd dnsmasq](image/dnsmasq_3.png)

# Посмотрите файлы документации, применив команду `man dnsmasq`.

![`man dnsmasq`](image/man_dnsmasq.png)

# Выведите на экран перечень и месторасположение конфигурационных файлов пакета: ([рис. @fig-006])

`rpm -qc dnsmasq`

# Выведите на экран расположение и содержание скриптов, выполняемых при установке пакета: ([рис. @fig-006])

`rpm -q --scripts dnsmasq`
и поясните, для чего предназначены скрипты.

![dnsmasq 4](image/dnsmasq_4.png){#fig-006}

# Вернитесь в терминал с учётной записью root и удалите пакет:

`rpm -e dnsmasq`

![rpm -e dnsmasq](image/dnsmasq_remove.png)

# Контрольные вопросы

# Какая команда позволяет вам искать пакет rpm, содержащий файл useradd?

- rpm -qf /usr/sbin/useradd или dnf provides \*/useradd

# Какие команды вам нужно использовать, чтобы показать имя группы dnf, которая содержит инструменты безопасности и показывает, что находится в этой группе?

- dnf groupinfo "Security Tools" (или dnf groupinfo --hidden "Security Tools")

# Какая команда позволяет вам установить rpm, который вы загрузили из Интернета и который не находится в репозиториях?

- sudo rpm -Uvh /path/to/package.rpm (или sudo dnf install /path/to/package.rpm)

# Вы хотите убедиться, что пакет rpm, который вы загрузили, не содержит никакого опасного кода сценария. Какая команда позволяет это сделать?

- rpm --checksig --nosignature /path/to/package.rpm (или rpm --checksig /path/to/package.rpm)

# Какая команда показывает всю документацию в rpm?

- rpm -q --docs -p /path/to/package.rpm (или rpm -qd package-name)

# Какая команда показывает, какому пакету rpm принадлежит файл?

- rpm -qf /path/to/file

# Выводы

Я получил навыки работы с репозиториями и менеджерами пакетов в Rocky.
